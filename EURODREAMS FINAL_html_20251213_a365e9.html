<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EURODREAMS Combinations Generator - 1-40 Choose 6</title>
    <style>
        body { 
            font-family: 'Arial', sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }
        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            background: white; 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.3); 
            border: 5px solid #ff6b6b;
        }
        .eurodreams-header { 
            text-align: center; 
            margin-bottom: 40px; 
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); 
            color: white; 
            padding: 30px; 
            border-radius: 15px;
            border: 3px solid #ff6b6b;
            position: relative;
        }
        .eurodreams-header h1 { 
            margin: 0; 
            font-size: 48px; 
            color: #ffd700; 
            text-shadow: 3px 3px 0 #1e3c72;
            letter-spacing: 2px;
        }
        .eurodreams-subtitle { 
            color: #ffd700; 
            font-weight: 700; 
            font-size: 24px; 
            margin: 15px 0; 
        }
        .jackpot-display {
            background: #ff6b6b;
            color: white;
            padding: 15px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 15px;
            border: 3px solid #ffd700;
            font-size: 18px;
            font-weight: 700;
        }
        .combinations { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); 
            gap: 15px; 
            margin-top: 30px; 
        }
        .combo { 
            padding: 15px; 
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); 
            border: 3px solid #1e3c72; 
            border-radius: 10px; 
            font-family: 'Courier New', monospace; 
            position: relative; 
            transition: all 0.3s; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            font-weight: 600;
        }
        .combo:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 10px 20px rgba(0,0,0,0.2); 
            border-color: #ff6b6b; 
        }
        .combo.searched { 
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); 
            border-left: 6px solid #28a745; 
        }
        .combo.searched::before { 
            content: "üîç"; 
            position: absolute; 
            left: -10px; 
            top: -10px; 
            font-size: 16px; 
            background: #28a745; 
            border-radius: 50%; 
            width: 25px; 
            height: 25px; 
            text-align: center; 
            line-height: 25px; 
            border: 2px solid white;
        }
        .combo.exact-match { 
            background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 100%); 
            color: white; 
            border: 4px solid #ffd700; 
            animation: dreamWin 1.5s infinite; 
            font-weight: 900;
        }
        @keyframes dreamWin {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .controls { 
            margin: 30px 0; 
            display: flex; 
            flex-wrap: wrap; 
            gap: 15px; 
            justify-content: center;
        }
        button { 
            padding: 14px 22px; 
            cursor: pointer; 
            border: none; 
            border-radius: 10px; 
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); 
            color: white; 
            font-weight: 700;
            font-size: 16px;
            transition: all 0.3s;
            border: 2px solid #ff6b6b;
        }
        button:hover { 
            background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 100%); 
            transform: translateY(-3px); 
        }
        .page-info { 
            margin: 25px 0; 
            padding: 20px; 
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); 
            border-radius: 12px; 
            font-weight: 700;
            border: 3px solid #1e3c72;
            color: #1e3c72;
            text-align: center;
            font-size: 18px;
        }
        .search-container { 
            margin: 30px 0; 
            padding: 30px; 
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); 
            border-radius: 15px; 
            color: white;
            border: 4px solid #ff6b6b;
        }
        .search-container h3 { 
            margin-top: 0; 
            color: #ffd700; 
            font-size: 28px;
        }
        .search-input { 
            padding: 15px; 
            width: 300px; 
            margin-right: 15px; 
            border: 3px solid #ffd700; 
            border-radius: 10px; 
            font-size: 18px;
            background: white;
            color: #1e3c72;
            font-weight: 600;
        }
        .search-result { 
            margin-top: 25px; 
            padding: 20px; 
            border-radius: 10px; 
            font-weight: 600; 
            font-size: 16px;
            border: 3px solid;
        }
        .search-result.info { 
            background: rgba(255, 214, 0, 0.9); 
            color: #1e3c72; 
            border-color: #1e3c72; 
        }
        .search-result.not-found { 
            background: rgba(255, 255, 255, 0.95); 
            color: #c62828; 
            border-color: #ef5350; 
        }
        .navigation-buttons { 
            margin-top: 20px; 
            display: flex; 
            gap: 15px; 
            flex-wrap: wrap; 
            justify-content: center;
        }
        .search-history { 
            margin-top: 30px; 
            padding: 25px; 
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); 
            border-radius: 12px; 
            border: 3px solid #1e3c72;
        }
        .badge { 
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); 
            color: white; 
            padding: 5px 12px; 
            border-radius: 20px; 
            font-size: 13px; 
            margin-left: 10px; 
            font-weight: 700;
            border: 2px solid #ff6b6b;
        }
        .loading { 
            display: none; 
            color: #ffd700; 
            font-weight: 700; 
            margin-top: 20px; 
            font-size: 20px;
            text-align: center;
        }
        .loading.active { display: block; }
        input[type="number"] {
            padding: 12px;
            border: 3px solid #1e3c72;
            border-radius: 10px;
            width: 120px;
            font-size: 18px;
            text-align: center;
            font-weight: 600;
            color: #1e3c72;
        }
        .btn-primary { 
            background: linear-gradient(135deg, #28a745 0%, #218838 100%); 
            border-color: #155724; 
        }
        .btn-primary:hover { 
            background: linear-gradient(135deg, #218838 0%, #1e7e34 100%); 
            color: white;
        }
        .combo-number {
            display: inline-block;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 50%;
            color: white;
            text-align: center;
            line-height: 35px;
            font-weight: 700;
            margin: 0 3px;
            border: 2px solid #ff6b6b;
        }
        .history-item {
            padding: 15px;
            margin: 12px 0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            border-left: 6px solid #ff6b6b;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        .history-item:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .disclaimer-box {
            margin-top: 40px;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            border: 3px solid #dc3545;
            color: #333;
            font-size: 14px;
            line-height: 1.6;
            text-align: center;
        }
        .disclaimer-box strong {
            color: #dc3545;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="eurodreams-header">
            <h1>EURODREAMS</h1>
            <p class="eurodreams-subtitle">1 to 40 ‚Ä¢ Choose 6 Numbers</p>
            <div class="jackpot-display">
                üí∞ All Possible Combinations: 3,838,380
            </div>
        </div>

        <div class="search-container">
            <h3>üîç Find Any Combination</h3>
            <input type="text" id="searchInput" class="search-input" placeholder="5,10,15,20,25,30">
            <button onclick="calculateExactPosition()" class="btn-primary">Find Exact Position</button>
            <button onclick="clearSearch()">Clear Search</button>
            <div id="loading" class="loading">Calculating exact position...</div>
            <div id="searchResult" class="search-result"></div>
            <div id="navigationButtons" class="navigation-buttons"></div>
        </div>

        <div class="search-history" id="searchHistoryContainer" style="display: none;">
            <h4>üìã Search History (This Session)</h4>
            <div id="searchHistoryList"></div>
            <button onclick="clearSearchHistory()" style="margin-top: 15px; background: #dc3545; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">Clear History</button>
        </div>

        <div class="controls">
            <button onclick="generateCombinations(1)">üí∞ First Page</button>
            <button onclick="generateCombinations(currentPage - 1)">‚Üê Previous Page</button>
            <button onclick="generateCombinations(currentPage + 1)">Next Page ‚Üí</button>
            <button onclick="goToSpecificPage()">Go to Page</button>
            <button onclick="downloadCurrentPage()">üíæ Download Page</button>
            <button onclick="generateRandomSample()">üé≤ Random Sample (100)</button>
        </div>

        <div class="page-info">
            üìÑ Page: <span id="currentPage">0</span> of <span id="totalPages">3,839</span> | 
            Showing: <span id="comboRange">0-0</span> |
            Jump: <input type="number" id="pageJumpInput" placeholder="Page #" min="1" max="3839">
        </div>

        <div id="combinationsContainer" class="combinations">
            <!-- Combinations will appear here -->
        </div>

        <div class="disclaimer-box">
            <strong>LEGAL DISCLAIMER:</strong> This tool is for entertainment and educational purposes only. It does not constitute financial advice, gambling advice, or any guarantee of winning any lottery. The EURODREAMS lottery is a game of chance, and all combinations are equally likely. This generator is meant for mathematical exploration and should not be used for actual gambling. Users must be of legal age according to their jurisdiction. Please play responsibly and within legal limits. The creator assumes no liability for any financial losses incurred through the use of this tool.
        </div>
    </div>

    <script>
        let currentPage = 0;
        const combosPerPage = 1000;
        const totalCombinations = 3838380; // C(40,6) = 3,838,380
        const totalPages = Math.ceil(totalCombinations / combosPerPage); // 3,839
        let currentCombinations = [];
        let lastSearchedCombination = null;
        
        // In-memory search history
        let searchHistory = [];

        // Pre-calculate binomial coefficients for faster computation
        const binomialCache = new Map();
        
        function binomialCoefficient(n, k) {
            if (k < 0 || k > n) return 0;
            if (k === 0 || k === n) return 1;
            
            const key = `${n},${k}`;
            if (binomialCache.has(key)) return binomialCache.get(key);
            
            let result = 1;
            for (let i = 1; i <= k; i++) {
                result = result * (n - k + i) / i;
            }
            
            binomialCache.set(key, Math.round(result));
            return Math.round(result);
        }

        document.getElementById('totalPages').textContent = totalPages.toLocaleString();
        updateSearchHistoryDisplay();

        function calculateLexicographicalPosition(combination) {
            const sortedCombo = [...combination].sort((a, b) => a - b);
            let position = 1;
            const n = 40;
            const k = 6;
            
            for (let i = 0; i < k; i++) {
                const currentNumber = sortedCombo[i];
                const prevNumber = (i === 0) ? 0 : sortedCombo[i - 1];
                
                for (let num = prevNumber + 1; num < currentNumber; num++) {
                    const remainingPositions = k - i - 1;
                    const remainingNumbers = n - num;
                    position += binomialCoefficient(remainingNumbers, remainingPositions);
                }
            }
            
            return position;
        }

        function getCombinationAtPosition(position) {
            if (position < 1 || position > totalCombinations) return null;
            
            let remaining = position - 1;
            const combo = [];
            let current = 1;
            const n = 40;
            const k = 6;
            
            for (let i = 0; i < k; i++) {
                const spotsLeft = k - i - 1;
                
                for (let num = current; num <= n; num++) {
                    const combs = binomialCoefficient(n - num, spotsLeft);
                    
                    if (remaining < combs) {
                        combo.push(num);
                        current = num + 1;
                        break;
                    } else {
                        remaining -= combs;
                    }
                }
            }
            
            return combo;
        }

        function generateCombinations(page) {
            if (page < 1) page = 1;
            if (page > totalPages) page = totalPages;
            
            const container = document.getElementById('combinationsContainer');
            const comboRange = document.getElementById('comboRange');
            const currentPageElem = document.getElementById('currentPage');
            
            container.innerHTML = '';
            currentPage = page;
            currentPageElem.textContent = currentPage.toLocaleString();
            
            const startIdx = (page - 1) * combosPerPage + 1;
            const endIdx = Math.min(startIdx + combosPerPage - 1, totalCombinations);
            comboRange.textContent = `${startIdx.toLocaleString()}-${endIdx.toLocaleString()}`;
            
            clearSearchHighlights();
            
            for (let i = 0; i < combosPerPage && (startIdx + i) <= totalCombinations; i++) {
                const comboNumber = startIdx + i;
                const combo = getCombinationAtPosition(comboNumber);
                
                const comboElement = document.createElement('div');
                comboElement.className = 'combo';
                comboElement.id = `combo-${comboNumber}`;
                
                const comboStr = JSON.stringify(combo);
                const isSearched = searchHistory.some(item => item.comboStr === comboStr);
                if (isSearched) {
                    comboElement.classList.add('searched');
                }
                
                if (lastSearchedCombination && JSON.stringify(combo) === JSON.stringify(lastSearchedCombination.combination)) {
                    comboElement.classList.add('exact-match');
                }
                
                const comboDisplay = combo.map(num => 
                    `<span class="combo-number">${num}</span>`
                ).join(' ');
                
                comboElement.innerHTML = `
                    <div style="color: #1e3c72; margin-bottom: 8px; font-size: 14px;">
                        Combination #${comboNumber.toLocaleString()}
                    </div>
                    <div style="font-size: 18px; margin: 10px 0;">
                        ${comboDisplay}
                    </div>
                    <div style="font-size: 12px; color: #666;">
                        [${combo.join(', ')}]
                    </div>
                `;
                container.appendChild(comboElement);
            }
            
            if (lastSearchedCombination) {
                setTimeout(() => {
                    const exactMatch = document.querySelector('.combo.exact-match');
                    if (exactMatch) {
                        exactMatch.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }, 100);
            }
        }

        function goToSpecificPage() {
            const pageInput = document.getElementById('pageJumpInput');
            const pageNum = parseInt(pageInput.value);
            if (!isNaN(pageNum) && pageNum >= 1 && pageNum <= totalPages) {
                generateCombinations(pageNum);
            } else {
                alert(`Please enter a page number between 1 and ${totalPages.toLocaleString()}`);
            }
        }

        function generateRandomSample() {
            const container = document.getElementById('combinationsContainer');
            const comboRange = document.getElementById('comboRange');
            const currentPageElem = document.getElementById('currentPage');
            
            container.innerHTML = '';
            currentPage = 0;
            currentPageElem.textContent = 'Random Sample';
            comboRange.textContent = '100 random combinations';
            
            clearSearchHighlights();
            
            for (let i = 1; i <= 100; i++) {
                const randomPos = Math.floor(Math.random() * totalCombinations) + 1;
                const combo = getCombinationAtPosition(randomPos);
                
                const comboElement = document.createElement('div');
                comboElement.className = 'combo';
                comboElement.id = `combo-${i}`;
                
                const comboStr = JSON.stringify(combo);
                const isSearched = searchHistory.some(item => item.comboStr === comboStr);
                if (isSearched) {
                    comboElement.classList.add('searched');
                }
                
                const comboDisplay = combo.map(num => 
                    `<span class="combo-number">${num}</span>`
                ).join(' ');
                
                comboElement.innerHTML = `
                    <div style="color: #ff6b6b; background: #1e3c72; padding: 5px; border-radius: 5px; margin-bottom: 8px; font-size: 14px;">
                        üé≤ Random #${i}
                    </div>
                    <div style="font-size: 18px; margin: 10px 0;">
                        ${comboDisplay}
                    </div>
                    <div style="font-size: 12px; color: #666;">
                        Position: ${randomPos.toLocaleString()}
                    </div>
                `;
                container.appendChild(comboElement);
            }
        }

        function calculateExactPosition() {
            const searchInput = document.getElementById('searchInput').value;
            const searchResult = document.getElementById('searchResult');
            const navigationButtons = document.getElementById('navigationButtons');
            const loading = document.getElementById('loading');
            
            clearSearchHighlights();
            navigationButtons.innerHTML = '';
            
            if (!searchInput.trim()) {
                searchResult.innerHTML = '<span style="color: #666;">Please enter numbers to search</span>';
                return;
            }
            
            let searchNumbers;
            try {
                searchNumbers = searchInput.split(',')
                    .map(num => parseInt(num.trim()))
                    .filter(num => !isNaN(num) && num >= 1 && num <= 40);
                    
                if (searchNumbers.length !== 6) {
                    searchResult.innerHTML = '<span style="color: #c62828;"><strong>Error:</strong> Please enter exactly 6 numbers between 1 and 40</span>';
                    searchResult.className = 'search-result not-found';
                    return;
                }
                
                if (new Set(searchNumbers).size !== 6) {
                    searchResult.innerHTML = '<span style="color: #c62828;"><strong>Error:</strong> Duplicate numbers found. Please enter 6 unique numbers.</span>';
                    searchResult.className = 'search-result not-found';
                    return;
                }
                
                searchNumbers.sort((a, b) => a - b);
                
            } catch (error) {
                searchResult.innerHTML = '<span style="color: #c62828;"><strong>Error:</strong> Invalid format. Use: 5,10,15,20,25,30</span>';
                searchResult.className = 'search-result not-found';
                return;
            }
            
            loading.classList.add('active');
            searchResult.innerHTML = '';
            
            setTimeout(() => {
                const exactPosition = calculateLexicographicalPosition(searchNumbers);
                const exactPage = Math.ceil(exactPosition / combosPerPage);
                
                lastSearchedCombination = {
                    combination: searchNumbers,
                    exactPosition: exactPosition,
                    exactPage: exactPage
                };
                
                addToSearchHistory(searchNumbers, exactPosition, exactPage);
                
                const comboDisplay = searchNumbers.map(num => 
                    `<span class="combo-number">${num}</span>`
                ).join(' ');
                
                searchResult.innerHTML = `
                    <div style="font-size: 24px; color: #1e3c72; margin-bottom: 15px;">
                        ‚úÖ EURODREAMS Combination Found!
                    </div>
                    <div style="font-size: 22px; margin: 15px 0;">
                        ${comboDisplay}
                    </div>
                    <div style="font-size: 18px; margin: 10px 0;">
                        <strong>Position:</strong> ${exactPosition.toLocaleString()} of ${totalCombinations.toLocaleString()}
                    </div>
                    <div style="font-size: 18px; margin: 10px 0;">
                        <strong>Page:</strong> ${exactPage.toLocaleString()} of ${totalPages.toLocaleString()}
                    </div>
                `;
                searchResult.className = 'search-result info';
                
                navigationButtons.innerHTML = `
                    <button onclick="goToExactPage(${exactPage})" class="btn-primary" style="font-size: 20px; padding: 18px 30px;">
                        Go to Page ${exactPage.toLocaleString()}
                    </button>
                `;
                
                loading.classList.remove('active');
                goToExactPage(exactPage);
                
            }, 100);
        }

        function addToSearchHistory(combination, exactPosition, exactPage) {
            const comboStr = JSON.stringify(combination);
            const timestamp = new Date().toLocaleString();
            
            const existingIndex = searchHistory.findIndex(item => item.comboStr === comboStr);
            
            const historyItem = {
                combination: [...combination],
                comboStr: comboStr,
                exactPosition: exactPosition,
                exactPage: exactPage,
                timestamp: timestamp
            };
            
            if (existingIndex !== -1) {
                searchHistory[existingIndex] = historyItem;
            } else {
                searchHistory.unshift(historyItem);
                if (searchHistory.length > 20) {
                    searchHistory.pop();
                }
            }
            
            updateSearchHistoryDisplay();
        }

        function updateSearchHistoryDisplay() {
            const historyContainer = document.getElementById('searchHistoryContainer');
            const historyList = document.getElementById('searchHistoryList');
            
            if (searchHistory.length === 0) {
                historyContainer.style.display = 'none';
                return;
            }
            
            historyContainer.style.display = 'block';
            historyList.innerHTML = '';
            
            searchHistory.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const comboDisplay = item.combination.map(num => 
                    `<span style="display: inline-block; width: 25px; height: 25px; background: #1e3c72; color: white; border-radius: 50%; text-align: center; line-height: 25px; margin: 0 2px; font-size: 12px; border: 2px solid #ff6b6b;">${num}</span>`
                ).join('');
                
                historyItem.innerHTML = `
                    <div style="font-weight: bold; color: #1e3c72; margin-bottom: 5px;">
                        ${comboDisplay}
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 13px;">
                        <span>
                            <span class="badge">Pos: ${item.exactPosition.toLocaleString()}</span>
                            <span class="badge">Page: ${item.exactPage.toLocaleString()}</span>
                        </span>
                        <small style="color: #666;">${item.timestamp}</small>
                    </div>
                `;
                historyItem.onclick = () => {
                    document.getElementById('searchInput').value = item.combination.join(', ');
                    lastSearchedCombination = {
                        combination: item.combination,
                        exactPosition: item.exactPosition,
                        exactPage: item.exactPage
                    };
                    goToExactPage(item.exactPage);
                };
                historyList.appendChild(historyItem);
            });
        }

        function clearSearchHistory() {
            if (confirm('Clear all search history for this session?')) {
                searchHistory = [];
                updateSearchHistoryDisplay();
                generateCombinations(currentPage);
            }
        }

        function goToExactPage(page) {
            document.getElementById('pageJumpInput').value = page;
            generateCombinations(page);
        }

        function downloadCurrentPage() {
            const combos = Array.from(document.querySelectorAll('.combo'))
                .map(el => {
                    const text = el.innerText || el.textContent;
                    return text.replace(/üé≤ Random #\d+|üí∞ Combination #\d+|üîç/g, '').trim();
                })
                .join('\n');
            
            const blob = new Blob([`EURODREAMS Combinations - Page ${currentPage}\nGenerated: ${new Date().toLocaleString()}\nTotal Combinations: 3,838,380\n\n${combos}`], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `EURODREAMS_Page_${currentPage}_Combinations.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResult').innerHTML = '';
            document.getElementById('searchResult').className = 'search-result';
            document.getElementById('navigationButtons').innerHTML = '';
            document.getElementById('loading').classList.remove('active');
            lastSearchedCombination = null;
            clearSearchHighlights();
        }

        function clearSearchHighlights() {
            const highlighted = document.querySelectorAll('.combo.exact-match');
            highlighted.forEach(el => {
                el.classList.remove('exact-match');
            });
        }

        // Initialize with first page
        generateCombinations(1);
    </script>
</body>
</html>